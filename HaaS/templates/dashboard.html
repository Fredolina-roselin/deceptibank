{% extends "base.html" %}

{% block title %}Dashboard - DeceptiBank{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-sidebar">
        <div class="sidebar-header">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="user-details">
                    <h4>{{ user.name }}</h4>
                    <p>{{ user.email }}</p>
                </div>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#overview" class="nav-item active" onclick="showSection('overview')">
                <i class="fas fa-tachometer-alt"></i>
                <span>Overview</span>
            </a>
            <a href="#profile" class="nav-item" onclick="showSection('profile')">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </a>
            <a href="#accounts" class="nav-item" onclick="showSection('accounts')">
                <i class="fas fa-wallet"></i>
                <span>Accounts</span>
            </a>
            <a href="#transactions" class="nav-item" onclick="showSection('transactions')">
                <i class="fas fa-exchange-alt"></i>
                <span>Transactions</span>
            </a>
            <a href="#notifications" class="nav-item" onclick="showSection('notifications')">
                <i class="fas fa-bell"></i>
                <span>Notifications</span>
            </a>
            <a href="#cibil" class="nav-item" onclick="showSection('cibil')">
                <i class="fas fa-chart-bar"></i>
                <span>CIBIL Score</span>
            </a>
            <a href="#settings" class="nav-item" onclick="showSection('settings')">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
        </nav>
    </div>
    
    <div class="dashboard-main">
         Overview Section 
        <div id="overview" class="dashboard-section active">
            <div class="section-header">
                <h2>Account Overview</h2>
                <p>Welcome back, {{ user.name }}!</p>
            </div>
            
            <div class="overview-cards">
                <div class="overview-card">
                    <div class="card-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="card-content">
                        <h3>${{ "%.2f"|format(balance) }}</h3>
                        <p>Total Balance</p>
                    </div>
                </div>
                
                <div class="overview-card">
                    <div class="card-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="card-content">
                        <h3>{{ accounts|length }}</h3>
                        <p>Active Accounts</p>
                    </div>
                </div>
                
                <div class="overview-card">
                    <div class="card-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="card-content">
                        <h3>+2.5%</h3>
                        <p>Monthly Growth</p>
                    </div>
                </div>
            </div>
            
            <div class="recent-activity">
                <h3>Recent Transactions</h3>
                <div class="transaction-list">
                    {% for transaction in transactions[:5] %}
                    <div class="transaction-item">
                        <div class="transaction-icon">
                            <i class="fas fa-{{ 'arrow-up' if transaction.amount > 0 else 'arrow-down' }}"></i>
                        </div>
                        <div class="transaction-details">
                            <h4>{{ transaction.description }}</h4>
                            <p>{{ transaction.date }}</p>
                        </div>
                        <div class="transaction-amount {{ 'positive' if transaction.amount > 0 else 'negative' }}">
                            ${{ "%.2f"|format(transaction.amount|abs) }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        
         Profile Section 
        <div id="profile" class="dashboard-section">
            <div class="section-header">
                <h2>Profile Information</h2>
                <p>Manage your personal details</p>
            </div>
            
            <div class="profile-form">
                <form>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" value="{{ user.name }}" readonly>
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" value="{{ user.email }}" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Username</label>
                            <input type="text" value="{{ user.username }}" readonly>
                        </div>
                        <div class="form-group">
                            <label>Account Type</label>
                            <input type="text" value="{{ user.role|title }}" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Member Since</label>
                        <input type="text" value="{{ user.created_at.strftime('%B %d, %Y') }}" readonly>
                    </div>
                    <button type="button" class="btn btn-primary">Edit Profile</button>
                </form>
            </div>
        </div>
        
         Accounts Section 
        <div id="accounts" class="dashboard-section">
            <div class="section-header">
                <h2>My Accounts</h2>
                <p>View all your banking accounts</p>
            </div>
            
            <div class="accounts-grid">
                {% for account in accounts %}
                <div class="account-card">
                    <div class="account-header">
                        <h3>{{ account.type }} Account</h3>
                        <span class="account-number">{{ account.account_no }}</span>
                    </div>
                    <div class="account-balance">
                        <h2>${{ "%.2f"|format(account.balance) }}</h2>
                        <p>Available Balance</p>
                    </div>
                    <div class="account-actions">
                        <button class="btn btn-sm btn-outline">View Details</button>
                        <button class="btn btn-sm btn-primary">Transfer</button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
         Transactions Section 
        <div id="transactions" class="dashboard-section">
            <div class="section-header">
                <h2>Transaction History</h2>
                <p>View and manage your transactions</p>
            </div>
            
            <div class="transaction-filters">
                <select class="filter-select">
                    <option>All Transactions</option>
                    <option>Credits</option>
                    <option>Debits</option>
                    <option>Transfers</option>
                </select>
                <input type="date" class="filter-date">
                <button class="btn btn-outline">Filter</button>
            </div>
            
            <div class="transaction-table">
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Description</th>
                            <th>Type</th>
                            <th>Amount</th>
                            <th>Balance</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for transaction in transactions %}
                        <tr>
                            <td>{{ transaction.date }}</td>
                            <td>{{ transaction.description }}</td>
                            <td>
                                <span class="transaction-type {{ transaction.type }}">
                                    {{ transaction.type|title }}
                                </span>
                            </td>
                            <td class="amount {{ 'positive' if transaction.amount > 0 else 'negative' }}">
                                ${{ "%.2f"|format(transaction.amount|abs) }}
                            </td>
                            <td>${{ "%.2f"|format(balance) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
            <div class="transfer-section">
                <h3>Make a Transfer</h3>
                <form id="transferForm" class="transfer-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>From Account</label>
                            <select name="from_account">
                                {% for account in accounts %}
                                <option value="{{ account.account_no }}">{{ account.type }} - {{ account.account_no }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>To Account/Recipient</label>
                            <input type="text" name="recipient" placeholder="Enter recipient details">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Amount</label>
                            <input type="number" name="amount" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" name="description" placeholder="Transfer description">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Transfer Funds</button>
                </form>
            </div>
        </div>
        
         Notifications Section 
        <div id="notifications" class="dashboard-section">
            <div class="section-header">
                <h2>Notifications</h2>
                <p>Stay updated with account alerts</p>
            </div>
            
            <div class="notifications-list">
                <div class="notification-item unread">
                    <div class="notification-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="notification-content">
                        <h4>Security Alert</h4>
                        <p>New login detected from Chrome on Windows</p>
                        <span class="notification-time">2 hours ago</span>
                    </div>
                </div>
                
                <div class="notification-item">
                    <div class="notification-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="notification-content">
                        <h4>Transaction Completed</h4>
                        <p>Transfer of $500.00 to John Doe completed successfully</p>
                        <span class="notification-time">1 day ago</span>
                    </div>
                </div>
                
                <div class="notification-item">
                    <div class="notification-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="notification-content">
                        <h4>Monthly Statement</h4>
                        <p>Your monthly statement is now available</p>
                        <span class="notification-time">3 days ago</span>
                    </div>
                </div>
            </div>
        </div>
        
         CIBIL Section 
        <div id="cibil" class="dashboard-section">
            <div class="section-header">
                <h2>CIBIL Credit Score</h2>
                <p>Monitor your credit health</p>
            </div>
            
            <div class="credit-score-card">
                <div class="score-display">
                    <div class="score-circle">
                        <span class="score-number">{{ range(650, 850)|random }}</span>
                        <span class="score-label">CIBIL Score</span>
                    </div>
                    <div class="score-status">
                        <h3>Good</h3>
                        <p>Your credit score is in good standing</p>
                    </div>
                </div>
                
                <div class="score-factors">
                    <h4>Factors Affecting Your Score</h4>
                    <div class="factor-item">
                        <span class="factor-label">Payment History</span>
                        <div class="factor-bar">
                            <div class="factor-progress" style="width: 85%"></div>
                        </div>
                        <span class="factor-score">85%</span>
                    </div>
                    <div class="factor-item">
                        <span class="factor-label">Credit Utilization</span>
                        <div class="factor-bar">
                            <div class="factor-progress" style="width: 70%"></div>
                        </div>
                        <span class="factor-score">70%</span>
                    </div>
                    <div class="factor-item">
                        <span class="factor-label">Credit History Length</span>
                        <div class="factor-bar">
                            <div class="factor-progress" style="width: 90%"></div>
                        </div>
                        <span class="factor-score">90%</span>
                    </div>
                </div>
            </div>
        </div>
        
         Settings Section 
        <div id="settings" class="dashboard-section">
            <div class="section-header">
                <h2>Account Settings</h2>
                <p>Manage your account preferences</p>
            </div>
            
            <div class="settings-grid">
                <div class="settings-card">
                    <h3>Security Settings</h3>
                    <div class="setting-item">
                        <label>Two-Factor Authentication</label>
                        <div class="toggle-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Login Notifications</label>
                        <div class="toggle-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </div>
                    </div>
                    <button class="btn btn-outline">Change Password</button>
                </div>
                
                <div class="settings-card">
                    <h3>Notification Preferences</h3>
                    <div class="setting-item">
                        <label>Email Notifications</label>
                        <div class="toggle-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>SMS Alerts</label>
                        <div class="toggle-switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </div>
                    </div>
                    <button class="btn btn-outline">Update Preferences</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
